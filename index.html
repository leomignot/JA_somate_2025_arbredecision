<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.52">

  <meta name="author" content="Arbres de décision : Une approche statistique pour dépasser la dichotomie quanti/quali">
  <title>Journées Annuelles So-MATE</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="styles.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Journées Annuelles So-MATE</h1>
  <p class="subtitle"><img src="figure/chat.jpg" width="280" style="margin-bottom:0px;"></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Arbres de décision : Une approche statistique pour dépasser la dichotomie quanti/quali<br> 
</div>
        <p class="quarto-title-affiliation">
            </p><p>Grégoire Le Campion - 02 octobre 2025 <br> <img src="figure/logosomate.png" width="125" style="float:center"></p>
          <p></p>
    </div>
</div>

</section>
<section>
<section id="section" class="title-slide slide level1 center" data-background="figure/arbre.gif" data-background-size="300px">
<h1></h1>
<h2 style="text-align: center;">
<p><strong>Qu’est ce qu’un arbre de décision ?</strong></p>
</h2>
<p><br> <br><br> <br><br> <br> <br> <br> <br> <br> <br> <br><span style="color:#4178bc;"> <br> <br></span></p>
</section>
<section id="carte-didentité-dun-arbre-de-décision" class="slide level2">
<h2>Carte d’identité d’un arbre de décision</h2>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:50px;">
</p><p>1- C’est une méthode relativement jeune, l’article de référence date de 1984 (<span style="color:#4178bc;"><em>L. Breiman et al.&nbsp;: Classification and Regression Trees. Wadsworth, 1984.</em></span>),</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:50px;">
</p><p>2- qui appartient au champ des méthodes d’apprentissage supervisées.</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:50px;">
</p><p>3- C’est un outil <strong>graphique et analytique</strong> permettant de <strong>représenter visuellement</strong> une succession de choix ou de tests à effectuer menant à différents résultats possibles,</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:50px;">
</p><p>4 - qui vise à <strong>prédire ou expliquer</strong> les valeurs prisent par une variable, que vous aurez choisie, en fonction <strong>d’un ensemble d’autres variables</strong> que vous aurez sélectionnées.</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:50px;">
</p><p><strong>Enfin, c’est un outil particulièrement intuitif car il mime notre façon naturelle de raisonner par questions successives.</strong></p>
<p></p>
</div>
</section>
<section id="un-outil-visuel" class="slide level2">
<h2>Un outil visuel</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment fade-up">
<p class="smallpcenter" style="margin-top:0px;">
</p><p>Ceci est un arbre de décision</p>
<p></p>
<div class="r-stack">
<p><img src="figure/exemple1.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
<div class="fragment fade-up">
<p class="smallpcenter" style="margin-top:0px;">
</p><p>ça aussi…</p>
<p></p>
<div class="r-stack">
<p><img src="figure/exemple3.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment fade-up">
<p class="smallpcenter" style="margin-top:0px;">
</p><p>Et aussi ça…</p>
<p></p>
<div class="r-stack">
<p><img src="figure/exemple2.png" width="300" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
<div class="fragment fade-up">
<p class="smallpcenter" style="margin-top:0px;">
</p><p>Etc…</p>
<p></p>
<div class="r-stack">
<p><img src="figure/exemple4.png" width="300" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</div></div>
</section>
<section id="de-nombreux-avantages" class="slide level2">
<h2>De nombreux avantages…</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment fade-up">
<p class="smallpcenter" style="margin-top:0px;">
</p><p>L’usage du multivarié en SHS c’est un peu ça…</p>
<p></p>
<div class="r-stack">
<p><img src="figure/vague.gif" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment fade-left">
<p class="smallpcenter" style="margin-top:0px;">
</p><p>Alors qu’avec les arbres de décision :</p>
<p></p>
</div>
<div class="fragment fade-up">
<p class="smallpcenter" style="margin-top:0px;">
</p><ul>
<li class="fragment">Gestion efficace des valeurs manquantes</li>
<li class="fragment">Peu sensible à la multicolinéarité</li>
<li class="fragment">Résite bien aux outliers (fonctionne avec des seuils)</li>
<li class="fragment">Peu gourmand en ressource</li>
<li class="fragment">Ne nécessite pas de préparation des données (standardisation…)</li>
<li class="fragment">Sélectionne les meilleurs variables parmi l’ensemble des prédicteurs fournis (pratique quand on a plus de variables que d’individus)</li>
<li class="fragment">Gère de fait la non linéarité des relations et pas d’hypothèse sur la distribution des données</li>
<li class="fragment">Facile à interpréter et fournit une représentation graphique parlante</li>
</ul>
<p></p>
</div>
</div></div>
<div class="fragment fade-left">
<p style="text-align: center; margin-top:0px; font-size: 70%;">
</p><p><span style="color:#4178bc;">Mais surtout on peut étudier de la même manière des variables <strong>quanti ou quali</strong> (on parlera d’arbre de régression ou de classification), dans une approche mixte c’est à dire utiliser simultanément dans nos prédicteurs des <strong>variables continues, ordinales ou qualitatives.</strong></span></p>
<p></p>
</div>
</section>
<section id="mais-quand-même-quelques-limites." class="slide level2">
<h2>Mais quand même quelques limites.</h2>
<div class="fragment fade-left">
<p style="font-size:70%;margin-top:0px;">
</p><p>1- Si la modération/intéraction est gérée naturellement les arbres ne peuvent pas étudier d’effet de médiations.</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:70%;margin-top:0px;">
</p><p>2- Moins efficace si les relations sont … linéaires et moins efficaces dans la prédiction que les régressions - <strong>à conditions que toutes leurs conditions sont respectées !!!!</strong></p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:70%;margin-top:0px;">
</p><p>3- Pas d’extrapolation : un arbre ne prédit pas au delà de ce qui est observé dans les valeurs d’entraînement</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:70%;margin-top:0px;">
</p><p>4- Pas d’inférence statistique : donc pas de significativité, de p-values, de coefficients, etc.</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:70%;margin-top:0px;">
</p><p>6- Quantification difficile des effets : pas de coefficient et l’importance d’une variable dépend de sa place dans l’arbre</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:70%;margin-top:0px;">
</p><p>7- Prédictions en escalier : Les arbres produisent des prédictions constantes par morceaux (effet “marche d’escalier”). Une régression donne des prédictions continues et lisses, plus réalistes pour beaucoup de phénomènes naturels.</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:70%;margin-top:0px;">
</p><p>8- Sensible aux petits échantillons</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:70%;margin-top:0px;">
</p><p>9- Risques de surapprentissage : c’est le piège majeur !</p>
<p></p>
</div>
</section>
<section id="en-bref" class="slide level2">
<h2>En bref…</h2>
<div class="fragment fade-down">
<p style="font-size:80%;margin-top:50px;">
</p><p><strong>L’arbre de décision apporte une solution intéressante aux défauts et limites des méthodes multivariées classiques.</strong></p>
<p></p>
<p style="font-size:80%;margin-top:50px;">
</p><p>L’arbre de décision est un outil tout terrain qui peut être exploratoire, descriptif ou décisionnel lorsque l’on veut prédire ou expliquer des données :</p>
<ul>
<li>de “mauvaise qualité”,</li>
<li>ou avec des relations complexes et non linéaires,</li>
<li>ou encore à très grande dimension,</li>
<li>ou en mélangeant des données quanti/quali</li>
<li><strong>ou tout cela à la fois !</strong></li>
</ul>
<p></p>
</div>
<div class="fragment fade-up">
<p style="text-align: center; margin-top:50px; font-size: 110%;">
</p><p><span style="color:#4178bc;"><strong>Bref un outil pratique en SHS !!!</strong></span></p>
<p></p>
</div>
</section></section>
<section>
<section id="section-1" class="title-slide slide level1 center" data-background="figure/pousse.gif" data-background-size="500px">
<h1></h1>
<h2 style="text-align: center;">
<p><strong>Comment pousse un arbre ?</strong></p>
</h2>
<p><br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br></p>
</section>
<section id="un-arbre-de-décision-pousse-depuis-la-racine" class="slide level2">
<h2>Un arbre de décision pousse depuis la racine :</h2>
<div class="fragment fade-up">
<p style="font-size:80%;margin-top:20px;">
</p><p>1- La racine représente l’ensemble des données, il s’agit de notre point de départ.</p>
<p></p>
</div>
<div class="fragment fade-up">
<div class="r-stack">
<p><img src="figure/arbrev_etape1.png" width="600" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</section>
<section id="première-ramification" class="slide level2">
<h2>Première ramification :</h2>
<div class="fragment fade-up">
<p style="font-size:80%;margin-top:20px;">
</p><p>2- Une première question binaire relative à l’une des variables prédictives est posé.</p>
<p></p>
</div>
<div class="fragment fade-up">
<p style="font-size:80%;margin-top:20px;">
</p><ul>
<li class="fragment">C’est la réponse à cette question qui sépare notre jeu de données en deux branches / groupes.</li>
</ul>
<ul>
<li class="fragment">La question est choisie de façon à obtenir les deux groupes les plus “purs” c’est à dire les plus homogènes en leur sein et les plus différents l’un de l’autre.</li>
</ul>
<p></p>
</div>
<div class="fragment fade-right">
<div class="r-stack">
<p><img src="figure/arbrev_etape2.png" width="500" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</section>
<section id="un-principe-récursif" class="slide level2">
<h2>Un principe récursif…</h2>
<div class="fragment fade-up">
<p style="font-size:80%;margin-top:20px;">
</p><p>3- Chacun des deux groupes obtenus peut à son tour être séparé en deux en choisissant à nouveau la meilleure question binaire possible à poser à l’aide du meilleur prédicteur possible.</p>
<ul>
<li class="fragment">La question va varier en fonction des sous-groupes d’individus.</li>
</ul>
<p></p>
</div>
<div class="fragment fade-left">
<div class="r-stack">
<p><img src="figure/arbrev_etape3.png" width="500" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</section>
<section id="jusquaux-feuilles" class="slide level2">
<h2>Jusqu’aux feuilles !</h2>
<div class="fragment fade-up">
<p style="font-size:80%;margin-top:20px;">
</p><p>4- Le processus se répète de manière récursive jusquà ce que certains critères d’arrêts soient respectés</p>
<p></p>
</div>
<div class="fragment fade-up">
<p style="font-size:80%;margin-top:20px;">
</p><ul>
<li class="fragment">Les groupes finaux constituent les feuilles de l’arbre.</li>
</ul>
<ul>
<li class="fragment">Un dernier modèle simple est donnée pour chacune des feuilles terminales afin d’expliquer notre variable</li>
</ul>
<p></p>
</div>
<div class="fragment fade-down">
<div class="r-stack">
<p><img src="figure/arbrev_entier.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</section>
<section id="i--comment-sont-choisis-les-questions" class="slide level2">
<h2>I- Comment sont choisis les questions ?</h2>
<div class="fragment fade-left">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Cette question est en réalité celle de la méthode de partitionnement de l’arbre.</p>
<p></p>
</div>
<div class="fragment fade-right">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Si le prédicteur est une variable quanti, la question se pose par rapport à un seuil.</p>
<ul>
<li class="fragment">Les individus ayant un score plus faible que ce seuil sont envoyés d’un côté et ceux ayant un score supérieur ou égale de l’autre.</li>
</ul>
<p></p>
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Si la variable est quali, la réponse porte sur une modalité ou un sous ensemble des modalité de la variable quali.</p>
<ul>
<li class="fragment">Les individus possédant une modalité du sous ensemble sont envoyé d’un côté et les autres de l’autre.</li>
</ul>
<p></p>
</div>
</section>
<section id="i--comment-sont-choisis-les-questions-2" class="slide level2">
<h2>I- Comment sont choisis les questions ? 2</h2>
<div class="fragment fade-right">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>L’algorithme va pour ce faire tester (quasi) toutes les possibilités : tous les seuils pour toutes les variables quanti et tous les sous ensemble pour toutes les variables quali !</p>
<p></p>
</div>
<div class="fragment fade-right">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>L’objectif de l’ algorithme est de chercher la meilleure question à poser à un prédicteur dont la réponse permettra de créer des sous groupes les plus homogènes possible !</p>
<p>La question au prédicteur X qui permet de maximiser le gain d’information, c’est à dire réduire le plus possible l’erreur de prévision, est la bonne question !</p>
<ul>
<li class="fragment">où l’erreur de prévision = l’erreur avant la séparation - l’erreur obtenu avec les nouveaux sous-groupes.</li>
<li class="fragment">Cet enjeu des division est associé à un paramètre fondamental qui s’appelle le CP (comlexity parameter) c’est le paramètre qui contrôle la compléxité des arbres.</li>
<li class="fragment">C’est le seuil de gain minimal requis pour qu’une division soit conservée dans l’arbre. Il quantifie le compromis entre l’amélioration de la précision et l’augmentation de la complexité.</li>
</ul>
<p></p>
</div>
<div class="fragment fade-right">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Pour un arbre de classification le gain d’information va être évalué grêce à l’indice de Gini (le plus souvent) ou un indice d’entropie.</p>
<p>Pour un arbre de régression c’est la variance intra groupe .</p>
<p></p>
</div>
</section>
<section id="ii--quel-modèle-pour-nos-groupes-dindividus" class="slide level2">
<h2>II- Quel modèle pour nos groupes d’individus ?</h2>
<div class="fragment fade-right">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Cette question du modèle créé pour chaque groupe d’individus renvoie simplement à comment interpréter les sous-groupes.</p>
<p></p>
</div>
<div class="fragment fade-right">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Le coeur de l’interprétation est lié au principe même de création des arbres de décision : subdiviser nos données en sous-groupe les plus homogènes possibles en leur sein (concernant la variable étudiée) et différents les uns des autres</p>
<p></p>
</div>
<div class="fragment fade-right">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Comme les sous-groupes d’individus sont supposées suffisamment homogènes ont fait généralement le choix d’un ajustement par une constante.</p>
<p></p>
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><ul>
<li class="fragment">Pour les arbres de régression ce sera le plus souvent la moyenne de la variable que nous cherchons à prédire.</li>
</ul>
<ul>
<li class="fragment">Pour les arbres de classification, le mode (c’est à dire la modalité la mieux représentée) de la variable que nous cherchons à prédire.</li>
</ul>
<p></p>
</div>
</section></section>
<section>
<section id="section-2" class="title-slide slide level1 center" data-background="figure/coyote.gif" data-background-size="500px">
<h1></h1>
<h2 style="text-align: center;">
<p><strong>Comment arrêter la croissance de l’arbre ?</strong></p>
</h2>
<p><br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br></p>
</section>
<section id="quel-critère-darret" class="slide level2">
<h2>Quel critère d’arret ?</h2>
<div class="fragment fade-up">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>L’objectif du découpage optimal est à la fois de <strong>réduire l’erreur de prédiction</strong> tout en <strong>évitant un surajustement</strong> où chaque groupe d’individus est composée d’un unique individu.</p>
<p></p>
</div>
<div class="fragment fade-up">
<p style="text-align: center; margin-top:30px; font-size: 90%;">
</p><p><span style="color:#4178bc;"><strong>Ou comment trouver le CP optimal ?</strong></span></p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Pour se faire on peut se baser sur plusieurs critère :</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:30px;">
</p><p>1- des critères a priori :</p>
<ul>
<li class="fragment">Obliger chaque groupe terminal à contenir un nombre minimal d’individus.</li>
<li class="fragment">Fixer un nombre minimal d’observations par nœud pour lancer la prochaine division.</li>
<li class="fragment">Controler la profondeur de l’arbre</li>
</ul>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:30px;">
</p><p>2- Retenir le nombre de groupes permettant de minimiser l’erreur de prédiction à l’aide de la validation croisée.</p>
<p><span style="color:#4178bc;"><strong>C’est cette méthode que l’on va en général privilégier.</strong></span></p>
<p></p>
</div>
</section>
<section id="petit-apparte-sur-la-validation-croisée" class="slide level2">
<h2>Petit apparte sur la validation croisée</h2>
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Il existe plusieurs méthodes mais la plus populaire est la validation croisée à k blocs (k-fold cross-validation en anglais)</p>
<p>Son objectif : tester la prédiction d’un modèle</p>
<p></p>
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>on divise notre échantillon avec d’un côté une partie qui servira pour entraîner le modèle et une autre partie sur laquelle sera testé le modèle.</p>
<p></p>
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>On répète cette opération k fois avec des échantillons de tests de même taille mais sélectionnés aléatoirement parmi nos individus et des échantillons d’entraînement qui devront également avoir la même taille et être sélectionnés aléatoirement.</p>
<p></p>
<div class="r-stack">
<p><img src="figure/cv.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</section>
<section id="sarreter-grâce-à-la-validation-croisé-1" class="slide level2">
<h2>S’arreter grâce à la validation croisé 1</h2>
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>Cela se fait en plusieurs étapes :</p>
<p></p>
<div class="fragment fade-left">
<p style="margin-top:20px;margin-bottom:0px;font-size:80%;">
</p><p>1- On produit un arbre très complexe, très grand sans se préoccuper du surajustement !</p>
<p>L’objectif est que cet arbre premier capture le plus de pattern possible : on parle d’<strong>arbre maximal ou complet</strong></p>
<p>A partir de cette arbre l’algorithme génère une séquence d’arbres de plus en plus simples.</p>
<p>Pour chaque valeur de CP (Complexity Parameter), on obtient un arbre élagué différent.</p>
<p></p>
</div>
</section>
<section id="sarreter-grâce-à-la-validation-croisé-2" class="slide level2">
<h2>S’arreter grâce à la validation croisé 2</h2>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:20px;">
</p><p>2- On recherche par validation croisée le CP optimal:</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:20px;">
</p><ul>
<li class="fragment">Pour chaque CP précédemment obtenu on applique une validation croisé</li>
</ul>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:20px;">
</p><ul>
<li class="fragment">Pour chaque bloc on construit l’arbre sur l’échantillon d’entrainement que l’on élague avec la valeur de CP testé</li>
</ul>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:20px;">
</p><ul>
<li class="fragment">On calcul l’erreur sur notre échantillon test</li>
</ul>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:20px;">
</p><ul>
<li class="fragment">On moyenne les erreurs et on obtient les erreurs en validation croisé pour chaque CP qui apparaissent sous la dénomination <code>xerror</code></li>
</ul>
<p></p>
</div>
</section>
<section id="sarreter-grâce-à-la-validation-croisé-3" class="slide level2">
<h2>S’arreter grâce à la validation croisé 3</h2>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:50px;">
</p><p>3- On sélectionne le CP optimal, qui correspond à l’élagage optimal.</p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:10px;">
</p><p>Critère 1 : le CP minimal</p>
<blockquote>
<p>L’erreur d’apprentissage diminue constamment jusqu’au surajustement à un 1 individu, alors que l’erreur en validation croisée diminue jusqu’à la taille optimale de l’arbre puis réaugmente. La réaugmentation indique le surajustement</p>
</blockquote>
<p></p>
<p style="text-align: center; margin-top:10px; font-size: 70%;">
</p><p><span style="color:#4178bc;"><strong>On choisit le <code>xerror</code> le plus faible</strong></span></p>
<p></p>
</div>
<div class="fragment fade-left">
<p style="font-size:80%;margin-top:10px;">
</p><p>Critère 2 : Règle du 1-SE</p>
<blockquote>
<p>On choisit le CP le plus élevé dont l’erreur reste dans un écart-type de l’erreur minimale :on obtient un arbre plus simple, donc plus interprétable, sans perdre beaucoup en performance.</p>
</blockquote>
<p></p>
<p style="text-align: center; margin-top:10px; font-size: 70%;">
</p><p><span style="color:#4178bc;"><strong>CP optimal = erreur de validation croisée minimum (<code>xerror</code>) + écart-type de l’erreur de validation croisée minimum (<code>xstd</code>)</strong></span></p>
<p></p>
</div>
</section></section>
<section>
<section id="section-3" class="title-slide slide level1 center" data-background="figure/comegetsome.gif" data-background-size="250px">
<h1></h1>
<h2 style="text-align: center;">
<p><strong>Merci de votre attention et à vous de jouer !</strong></p>
</h2>
<p class="small" style="text-align: center;">
</p><p>Pour accéder aux données et au dépôt : <a href="https://github.com/LeCampionG/JA_somate_2025_arbredecision"><strong>https://github.com/LeCampionG/JA_somate_2025_arbredecision</strong></a> <br> A l’application clic-bouton : <a href="https://analytics.huma-num.fr/Gregoire.LeCampion/Arbre_de_decision/"><strong>https://analytics.huma-num.fr/Gregoire.LeCampion/Arbre_de_decision/</strong></a></p>
<p></p>
<p><br> <br> <br> <br> <br> <br> <br> <br></p>
<p><strong>Contact</strong> : <a href="mailto:gregoire.lecampion@cnrs.fr" class="email">gregoire.lecampion@cnrs.fr</a> <br><strong>Diapositives libres</strong> (CC BY-SA 4.0)</p>
<p></p>
</section>
<section id="chargement-des-données" class="slide level2">
<h2>Chargement des données</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Consignes</a></li><li><a href="#tabset-1-2">Solutions</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-1-1">
<p><br></p>
<p style="margin-top:0px; font-size: 60%;">
</p><p>On commence par charger nos données. Notre objectif tenter de prédire la survie au nauffrage du Titanic !</p>
<p>Nous utiliserons donc les données issue du package <code>titanic</code></p>
<p></p>
</div>
<div id="tabset-1-2">
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">library</span>(titanic)</span>
<span id="cb1-2"><a href=""></a><span class="co"># Ce jeux de données correspond à : data("titanic_train"), qui est un jeu d'entraînement du package titanic</span></span>
<span id="cb1-3"><a href=""></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href=""></a><span class="fu">library</span>(here)</span>
<span id="cb1-5"><a href=""></a></span>
<span id="cb1-6"><a href=""></a><span class="co"># On situe le dossier dans lequel se trouve nos données</span></span>
<span id="cb1-7"><a href=""></a>csv_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"titanic_data.csv"</span>)</span>
<span id="cb1-8"><a href=""></a><span class="co"># Lecture du CSV dans un dataframe</span></span>
<span id="cb1-9"><a href=""></a>titanic_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(csv_path)</span>
<span id="cb1-10"><a href=""></a></span>
<span id="cb1-11"><a href=""></a><span class="co"># Nettoyage rapide</span></span>
<span id="cb1-12"><a href=""></a>titanic_data <span class="ot">&lt;-</span> titanic_data <span class="sc">%&gt;%</span></span>
<span id="cb1-13"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-14"><a href=""></a>    <span class="at">Survived =</span> <span class="fu">factor</span>(Survived, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Non"</span>, <span class="st">"Oui"</span>)),</span>
<span id="cb1-15"><a href=""></a>    <span class="at">Pclass =</span> <span class="fu">factor</span>(Pclass),</span>
<span id="cb1-16"><a href=""></a>    <span class="at">Sex =</span> <span class="fu">factor</span>(Sex),</span>
<span id="cb1-17"><a href=""></a>    <span class="at">Embarked =</span> <span class="fu">factor</span>(Embarked)</span>
<span id="cb1-18"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="charger-les-packages" class="slide level2">
<h2>Charger les packages</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">Consignes</a></li><li><a href="#tabset-2-2">Solutions</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-2-1">
<p style="margin-top:0px; font-size: 60%;">
</p><p>Il existe plusieurs package pour réaliser des arbres de décisions dans R : mais le package <code>rpart</code> est le package standard qui est même fourni nativement dans R.</p>
<p></p>
<p class="small" style="font-size:55%;">
</p><p><img src="figure/alert.png" width="30" style="margin-top:0px;margin-bottom:-7px;margin-right:8px;"><span style="color:#4178bc;"><strong>Nous avons ici parlé uniquement des arbres qui fonctionne avec l’algorithme CART, qui est majoritairement utilisé, mais sachez qu’il en existe beaucoup d’autres, par exemple :</strong></span></p>
<ul>
<li class="fragment">l’algorithme CHAID : repose sur le chi² et qui a la particularité de permettre des arbres multi branches et pas seulement binaire comme avec CART</li>
<li class="fragment">l’agorithme CTREE : repose sur des test d’indépendance conditionnels et va tenir compte de la distribution de nos variable</li>
<li class="fragment">etc…</li>
</ul>
<p></p>
</div>
<div id="tabset-2-2">
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="co"># Installer et charger les packages nécessaires</span></span>
<span id="cb2-2"><a href=""></a><span class="co">#  install.packages("rpart")</span></span>
<span id="cb2-3"><a href=""></a></span>
<span id="cb2-4"><a href=""></a></span>
<span id="cb2-5"><a href=""></a><span class="fu">library</span>(rpart)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="produire-notre-premier-arbre" class="slide level2">
<h2>Produire notre premier arbre</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1">Consignes</a></li><li><a href="#tabset-3-2">Exercices</a></li><li><a href="#tabset-3-3">Solutions</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-3-1">
<p style="margin-top:0px; font-size: 60%;">
</p><p>On réalise un premier arbre dont l’objectif est de comprendre la survie au naufrage du Titanic.</p>
<p>Nous utiliserons les variables suivantes :</p>
<ul>
<li class="fragment"><code>Pclass</code> = classe (1ère, 2ème, 3ème)</li>
<li class="fragment"><code>Sex</code> = sexe</li>
<li class="fragment"><code>Age</code> = âge</li>
<li class="fragment"><code>SibSp</code> = Nombre de frères et sœurs / conjoints à bord</li>
<li class="fragment"><code>Parch</code> = Nombre de parents / enfants à bord</li>
<li class="fragment"><code>Fare</code> = prix du billet</li>
<li class="fragment"><code>Embarked</code> = port d’embarquement</li>
<li class="fragment"><code>Survived</code> = survie au naufrage (Oui / Non).</li>
</ul>
<p></p>
</div>
<div id="tabset-3-2">
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="co"># Indice la rédaction est très proche de celle d'un modèle de régression</span></span>
<span id="cb3-2"><a href=""></a><span class="do">## On utilisera la fonction `rpart()` pour produire le modèle</span></span>
<span id="cb3-3"><a href=""></a><span class="do">## Petit rappel pour avoir l'aide d'une fonction on utilise le `?` de vant la fonction `?rpart()`</span></span>
<span id="cb3-4"><a href=""></a></span>
<span id="cb3-5"><a href=""></a>abc <span class="ot">&lt;-</span> <span class="fu">rpart</span>(VD <span class="sc">~</span> VI1 <span class="sc">+</span> VI2 ,</span>
<span id="cb3-6"><a href=""></a>                <span class="at">data =</span> ,</span>
<span id="cb3-7"><a href=""></a>                <span class="at">method =</span> )</span>
<span id="cb3-8"><a href=""></a>                </span>
<span id="cb3-9"><a href=""></a><span class="co"># Pour représenter graphiquement un arrbre on utilisera la fonction `plot()` associé à la fonction `text()`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-3">
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a><span class="do">## Construction d'un premier arbre basique pour expliquer la survie au naufrage :</span></span>
<span id="cb4-2"><a href=""></a>modele <span class="ot">&lt;-</span> <span class="fu">rpart</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked,</span>
<span id="cb4-3"><a href=""></a>                <span class="at">data =</span> titanic_data,</span>
<span id="cb4-4"><a href=""></a>                <span class="at">method =</span> <span class="st">"class"</span>)</span>
<span id="cb4-5"><a href=""></a>                </span>
<span id="cb4-6"><a href=""></a><span class="do">## Graphique basique avec les paramètre par défaut :</span></span>
<span id="cb4-7"><a href=""></a><span class="fu">plot</span>(modele, <span class="at">compress=</span><span class="cn">TRUE</span>, <span class="at">margin =</span> <span class="fl">0.1</span>)</span>
<span id="cb4-8"><a href=""></a><span class="fu">text</span>(modele, <span class="at">pretty =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="r-stack">
<p><img src="figure/arbre1.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</div>
</div>
</section>
<section id="produire-notre-premier-élagué" class="slide level2">
<h2>Produire notre premier élagué !</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">Consignes</a></li><li><a href="#tabset-4-2">Exercices</a></li><li><a href="#tabset-4-3">Solutions</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-4-1">
<p style="margin-top:0px; font-size: 60%;">
</p><p>On produit notre arbre élagué !</p>
<ul>
<li class="fragment">Etape 1 : un arbre le plus profond possible</li>
<li class="fragment">Etape 2 : On réalise notre validation croisé</li>
<li class="fragment">Etape 3 : on identifie le bon niveau de compléxité pour élaguer l’arbre</li>
<li class="fragment">Etpae 4 : on produit notre arbre élagué.</li>
</ul>
<p></p>
</div>
<div id="tabset-4-2">
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="co"># Etape 1 et 2 : Tout peut se faire via la fonction `rpart()`, on pourra utiliser les argument de rpart.control</span></span>
<span id="cb5-2"><a href=""></a><span class="do">## A savoir `cp=`, `minbucket=`, `minsplit=` et `xval`</span></span>
<span id="cb5-3"><a href=""></a><span class="do">## On visualise notre arbre complet</span></span>
<span id="cb5-4"><a href=""></a></span>
<span id="cb5-5"><a href=""></a><span class="co"># On identifie le bon niveau de compléxité</span></span>
<span id="cb5-6"><a href=""></a><span class="do">## Les scores de CP sont enregistré dasn notre modèle</span></span>
<span id="cb5-7"><a href=""></a><span class="do">## On peut les visualiser via un graphique avec `plotcp()`...</span></span>
<span id="cb5-8"><a href=""></a><span class="do">## Ou à l'aide d'un tableau numérique</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="r-stack">
<p><img src="figure/cpplot.png" width="300" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div><div class="column" style="width:50%;">
<div class="r-stack">
<p><img src="figure/arbre_elague.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div></div>
</div>
<div id="tabset-4-3">
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="co"># Construction d'un premier arbre basique pour expliquer la survie au naufrage :</span></span>
<span id="cb6-2"><a href=""></a><span class="do">## je choisis ici de pousser vers un CP très faible</span></span>
<span id="cb6-3"><a href=""></a><span class="do">## On aurait pu choisir sur les individus de nos sous groupe avec minsplit ou mminbucket</span></span>
<span id="cb6-4"><a href=""></a><span class="do">## xval renvoie au nombre de validation croisé ici j'ai fixé ce nombre au nombre d'individu dans notre jeux de données.</span></span>
<span id="cb6-5"><a href=""></a>modele <span class="ot">&lt;-</span> <span class="fu">rpart</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked,</span>
<span id="cb6-6"><a href=""></a>                <span class="at">data =</span> titanic_data,</span>
<span id="cb6-7"><a href=""></a>              <span class="at">cp =</span> <span class="fl">0.001</span>, <span class="at">xval=</span> <span class="fu">nrow</span>(titanic_train))</span>
<span id="cb6-8"><a href=""></a>              </span>
<span id="cb6-9"><a href=""></a><span class="fu">plot</span>(modele, <span class="at">compress=</span><span class="cn">TRUE</span>, <span class="at">margin =</span> <span class="fl">0.1</span>)</span>
<span id="cb6-10"><a href=""></a><span class="fu">text</span>(modele, <span class="at">pretty =</span> <span class="dv">0</span>)</span>
<span id="cb6-11"><a href=""></a></span>
<span id="cb6-12"><a href=""></a></span>
<span id="cb6-13"><a href=""></a><span class="do">## Le graphique des CP</span></span>
<span id="cb6-14"><a href=""></a><span class="fu">plotcp</span>(modele)</span>
<span id="cb6-15"><a href=""></a></span>
<span id="cb6-16"><a href=""></a><span class="do">## le tableau :</span></span>
<span id="cb6-17"><a href=""></a>modele<span class="sc">$</span>cptable</span>
<span id="cb6-18"><a href=""></a></span>
<span id="cb6-19"><a href=""></a><span class="co">#Sélection du CP minimal (critère 1)</span></span>
<span id="cb6-20"><a href=""></a>cp_optimal <span class="ot">=</span> <span class="fu">print</span>(modele<span class="sc">$</span>cptable[<span class="fu">which.min</span>(modele<span class="sc">$</span>cptable[,<span class="dv">4</span>]),<span class="dv">1</span>])</span>
<span id="cb6-21"><a href=""></a></span>
<span id="cb6-22"><a href=""></a>arbre_titanic_opt <span class="ot">&lt;-</span> <span class="fu">prune</span>(modele,<span class="at">cp=</span>cp_optimal)</span>
<span id="cb6-23"><a href=""></a></span>
<span id="cb6-24"><a href=""></a><span class="fu">plot</span>(arbre_titanic_opt, <span class="at">compress=</span><span class="cn">TRUE</span>, <span class="at">margin =</span> <span class="fl">0.1</span>)</span>
<span id="cb6-25"><a href=""></a><span class="fu">text</span>(arbre_titanic_opt, <span class="at">pretty =</span> <span class="dv">0</span>)</span>
<span id="cb6-26"><a href=""></a></span>
<span id="cb6-27"><a href=""></a></span>
<span id="cb6-28"><a href=""></a><span class="co"># CP le plus élevé dans la zone d'erreur acceptable (critere2)</span></span>
<span id="cb6-29"><a href=""></a>xerror_min <span class="ot">&lt;-</span> <span class="fu">min</span>(modele<span class="sc">$</span>cptable[,<span class="st">"xerror"</span>])</span>
<span id="cb6-30"><a href=""></a>xerror_seuil <span class="ot">&lt;-</span> xerror_min <span class="sc">+</span> modele<span class="sc">$</span>cptable[<span class="fu">which.min</span>(modele<span class="sc">$</span>cptable[,<span class="st">"xerror"</span>]), <span class="st">"xstd"</span>]</span>
<span id="cb6-31"><a href=""></a>cp_optimal <span class="ot">&lt;-</span> <span class="fu">max</span>(modele<span class="sc">$</span>cptable[modele<span class="sc">$</span>cptable[,<span class="st">"xerror"</span>] <span class="sc">&lt;=</span> xerror_seuil, <span class="st">"CP"</span>])</span>
<span id="cb6-32"><a href=""></a>arbre_titanic_opt <span class="ot">&lt;-</span> <span class="fu">prune</span>(modele,<span class="at">cp=</span>cp_optimal)</span>
<span id="cb6-33"><a href=""></a></span>
<span id="cb6-34"><a href=""></a><span class="fu">plot</span>(arbre_titanic_opt, <span class="at">compress=</span><span class="cn">TRUE</span>, <span class="at">margin =</span> <span class="fl">0.1</span>)</span>
<span id="cb6-35"><a href=""></a><span class="fu">text</span>(arbre_titanic_opt, <span class="at">pretty =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="quelques-infos-en-plus" class="slide level2">
<h2>Quelques infos en plus</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1">Consignes</a></li><li><a href="#tabset-5-2">Exercices</a></li><li><a href="#tabset-5-3">Solutions</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-5-1">
<p style="margin-top:0px; font-size: 60%;">
</p><p>Obtenir des infos en plus sur notre modèle : l’importance de nos variables et une traduction plus littérale de notre arbre…</p>
<p></p>
</div>
<div id="tabset-5-2">
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="co"># L'importance est aussi donné dans le modèle !</span></span>
<span id="cb7-2"><a href=""></a></span>
<span id="cb7-3"><a href=""></a><span class="co"># `print()` et `summary()` les meilleurs amis des modèles !</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="r-stack">
<p><img src="figure/importance_var.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
<div id="tabset-5-3">
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="co"># Importance des variables dans notre arbre</span></span>
<span id="cb8-2"><a href=""></a>importance <span class="ot">&lt;-</span> arbre_titanic_opt<span class="sc">$</span>variable.importance</span>
<span id="cb8-3"><a href=""></a></span>
<span id="cb8-4"><a href=""></a><span class="co"># Importance normalisée en %</span></span>
<span id="cb8-5"><a href=""></a>importance_pct <span class="ot">&lt;-</span> arbre_titanic_opt<span class="sc">$</span>variable.importance <span class="sc">/</span> <span class="fu">sum</span>(arbre_titanic_opt<span class="sc">$</span>variable.importance) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb8-6"><a href=""></a></span>
<span id="cb8-7"><a href=""></a></span>
<span id="cb8-8"><a href=""></a><span class="fu">barplot</span>(importance_pct,</span>
<span id="cb8-9"><a href=""></a>        <span class="at">las =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">"skyblue"</span>,</span>
<span id="cb8-10"><a href=""></a>        <span class="at">main =</span> <span class="st">"Importance des variables (Titanic)"</span>,</span>
<span id="cb8-11"><a href=""></a>        <span class="at">ylab =</span> <span class="st">"Importance (%)"</span>)</span>
<span id="cb8-12"><a href=""></a></span>
<span id="cb8-13"><a href=""></a><span class="co">#Afficher un résumé des règles de l'arbre</span></span>
<span id="cb8-14"><a href=""></a><span class="fu">print</span>(arbre_titanic_opt)</span>
<span id="cb8-15"><a href=""></a></span>
<span id="cb8-16"><a href=""></a><span class="co"># résumé détaillé avec coupures</span></span>
<span id="cb8-17"><a href=""></a><span class="fu">summary</span>(arbre_titanic_opt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="rendre-les-arbres-plus-attractif" class="slide level2">
<h2>Rendre les arbres plus attractif</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1">Consignes</a></li><li><a href="#tabset-6-2">Solutions</a></li><li><a href="#tabset-6-3">Rpart.plot</a></li><li><a href="#tabset-6-4">partykit</a></li><li><a href="#tabset-6-5">rattle</a></li><li><a href="#tabset-6-6">visNetwork</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-6-1">
<p style="margin-top:0px; font-size: 60%;">
</p><p>De jolis arbres!</p>
<p>Il existe des packages qui permettent de customiser la sortie classique réaliser avec <code>plot()</code>, et <code>text()</code>, notamment : <code>rpart.plot</code>, <code>partykit</code>, <code>rattle</code> ou encore <code>visNetwork</code> si on veut le rendre interactif !</p>
<p></p>
</div>
<div id="tabset-6-2">
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a></span>
<span id="cb9-2"><a href=""></a><span class="co">#install.packages("rpart.plot")</span></span>
<span id="cb9-3"><a href=""></a><span class="co">#install.packages("partykit")</span></span>
<span id="cb9-4"><a href=""></a><span class="co">#install.packages("rattle")</span></span>
<span id="cb9-5"><a href=""></a><span class="co">#install.packages("visNetwork")</span></span>
<span id="cb9-6"><a href=""></a></span>
<span id="cb9-7"><a href=""></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb9-8"><a href=""></a><span class="fu">library</span>(partykit)</span>
<span id="cb9-9"><a href=""></a><span class="fu">library</span>(rattle)</span>
<span id="cb9-10"><a href=""></a><span class="fu">library</span>(visNetwork)</span>
<span id="cb9-11"><a href=""></a></span>
<span id="cb9-12"><a href=""></a></span>
<span id="cb9-13"><a href=""></a><span class="co"># Avec rpart.plot</span></span>
<span id="cb9-14"><a href=""></a></span>
<span id="cb9-15"><a href=""></a><span class="fu">rpart.plot</span>(arbre_titanic_opt,</span>
<span id="cb9-16"><a href=""></a>            <span class="at">type =</span> <span class="dv">2</span>, <span class="at">extra =</span> <span class="dv">104</span>, <span class="at">fallen.leaves =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-17"><a href=""></a>            <span class="at">box.palette =</span> <span class="st">"RdBu"</span>, <span class="at">branch.lty =</span> <span class="dv">3</span>,</span>
<span id="cb9-18"><a href=""></a>            <span class="at">shadow.col =</span> <span class="st">"gray"</span>,</span>
<span id="cb9-19"><a href=""></a>            <span class="at">main =</span> <span class="st">"Style rpart.plot"</span>)</span>
<span id="cb9-20"><a href=""></a></span>
<span id="cb9-21"><a href=""></a><span class="co"># Avec partykit</span></span>
<span id="cb9-22"><a href=""></a><span class="fu">plot</span>(<span class="fu">as.party</span>(arbre_titanic_opt), <span class="at">main =</span> <span class="st">"Style partykit"</span>)</span>
<span id="cb9-23"><a href=""></a></span>
<span id="cb9-24"><a href=""></a></span>
<span id="cb9-25"><a href=""></a><span class="co"># Avec rattle</span></span>
<span id="cb9-26"><a href=""></a><span class="fu">fancyRpartPlot</span>(arbre_titanic_opt,</span>
<span id="cb9-27"><a href=""></a>               <span class="at">caption =</span> <span class="st">"Arbre de décision pour prédire la survie au naufrage du Titanic"</span>,</span>
<span id="cb9-28"><a href=""></a>               <span class="at">palettes =</span> <span class="fu">c</span>(<span class="st">"Greens"</span>, <span class="st">"Blues"</span>), <span class="co"># couleurs pour les classes</span></span>
<span id="cb9-29"><a href=""></a>               <span class="at">main =</span> <span class="st">"Style rattle"</span>,</span>
<span id="cb9-30"><a href=""></a>               <span class="at">sub =</span> <span class="st">"Source : jeu de données Titanic"</span>) </span>
<span id="cb9-31"><a href=""></a>               </span>
<span id="cb9-32"><a href=""></a><span class="co"># Avec visNetwork</span></span>
<span id="cb9-33"><a href=""></a></span>
<span id="cb9-34"><a href=""></a><span class="fu">visTree</span>(arbre_titanic_opt, <span class="at">nodesPopSize =</span> <span class="cn">TRUE</span>, <span class="at">minNodeSize =</span> <span class="dv">10</span>, <span class="at">maxNodeSize =</span> <span class="dv">30</span>)</span>
<span id="cb9-35"><a href=""></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-3">
<div class="r-stack">
<p><img src="figure/rpartplot.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
<div id="tabset-6-4">
<div class="r-stack">
<p><img src="figure/partykit.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
<div id="tabset-6-5">
<div class="r-stack">
<p><img src="figure/rattle.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
<div id="tabset-6-6">
<div class="r-stack">
<p><img src="figure/visNetwork.png" width="400" style="margin-top:15px;margin-bottom:0px"></p>
</div>
</div>
</div>
</div>
</section>
<section id="et-pour-prédire" class="slide level2">
<h2>Et pour prédire ?</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">Consignes</a></li><li><a href="#tabset-7-2">Exercice</a></li><li><a href="#tabset-7-3">Solutions</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-7-1">
<p style="margin-top:0px; font-size: 60%;">
</p><p>L’arbre de décision est un excellent outil de prédiction, on peut donc s’appuyer sur l’arbre réalisé pour en déduire la survie !</p>
<p>Auriez-vous survécu ?</p>
<p></p>
</div>
<div id="tabset-7-2">
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="co"># On utilisera la fonction predict() qui permet de faire des prédictions sur de nouvelles données.</span></span>
<span id="cb10-2"><a href=""></a><span class="do">## Deux éléments sont essentielles, un modèle d'arbre de décision et un jeux de données à prédire !</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-3">
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a></span>
<span id="cb11-2"><a href=""></a><span class="co"># On situe le dossier dans lequel se trouve nos données</span></span>
<span id="cb11-3"><a href=""></a>csv_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"titanic_predict.csv"</span>)</span>
<span id="cb11-4"><a href=""></a><span class="co"># Lecture du CSV dans un dataframe</span></span>
<span id="cb11-5"><a href=""></a>titanic_predict <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(csv_path)</span>
<span id="cb11-6"><a href=""></a></span>
<span id="cb11-7"><a href=""></a>titanic_predict <span class="ot">&lt;-</span> titanic_predict <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-9"><a href=""></a>  <span class="at">Survived =</span> <span class="fu">factor</span>(Survived),</span>
<span id="cb11-10"><a href=""></a>    <span class="at">Pclass =</span> <span class="fu">factor</span>(Pclass),</span>
<span id="cb11-11"><a href=""></a>    <span class="at">Sex =</span> <span class="fu">factor</span>(Sex),</span>
<span id="cb11-12"><a href=""></a>    <span class="at">Embarked =</span> <span class="fu">factor</span>(Embarked)</span>
<span id="cb11-13"><a href=""></a>  )</span>
<span id="cb11-14"><a href=""></a></span>
<span id="cb11-15"><a href=""></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(arbre_titanic_opt, titanic_predict, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb11-16"><a href=""></a><span class="fu">print</span>(pred)</span>
<span id="cb11-17"><a href=""></a></span>
<span id="cb11-18"><a href=""></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(arbre_titanic_opt, titanic_predict)</span>
<span id="cb11-19"><a href=""></a><span class="fu">print</span>(pred)</span>
<span id="cb11-20"><a href=""></a></span>
<span id="cb11-21"><a href=""></a></span>
<span id="cb11-22"><a href=""></a><span class="co"># Prédire pour vérifier la puissance de son arbre !</span></span>
<span id="cb11-23"><a href=""></a></span>
<span id="cb11-24"><a href=""></a><span class="fu">library</span>(caret)</span>
<span id="cb11-25"><a href=""></a>train_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(titanic_data<span class="sc">$</span>Survived, <span class="at">p =</span> <span class="fl">0.8</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb11-26"><a href=""></a>train_data <span class="ot">&lt;-</span> titanic_data[train_index, ]</span>
<span id="cb11-27"><a href=""></a>test_data <span class="ot">&lt;-</span> titanic_data[<span class="sc">-</span>train_index, ]</span>
<span id="cb11-28"><a href=""></a></span>
<span id="cb11-29"><a href=""></a><span class="co"># Modèle</span></span>
<span id="cb11-30"><a href=""></a>arbre <span class="ot">&lt;-</span> <span class="fu">rpart</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked, </span>
<span id="cb11-31"><a href=""></a>               <span class="at">data =</span> train_data, <span class="at">method =</span> <span class="st">"class"</span>)</span>
<span id="cb11-32"><a href=""></a></span>
<span id="cb11-33"><a href=""></a><span class="co"># Prédictions</span></span>
<span id="cb11-34"><a href=""></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(arbre, test_data, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb11-35"><a href=""></a></span>
<span id="cb11-36"><a href=""></a><span class="co"># Matrice de confusion</span></span>
<span id="cb11-37"><a href=""></a>conf_matrix <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(pred, test_data<span class="sc">$</span>Survived)</span>
<span id="cb11-38"><a href=""></a><span class="fu">print</span>(conf_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="une-alternative-à-rpart-partykit" class="slide level2">
<h2>Une alternative à Rpart : partykit</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">Solutions</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-8-1">
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="fu">library</span>(partykit)</span>
<span id="cb12-2"><a href=""></a></span>
<span id="cb12-3"><a href=""></a>party <span class="ot">=</span> <span class="fu">as.party</span>(arbre_titanic_opt)</span>
<span id="cb12-4"><a href=""></a></span>
<span id="cb12-5"><a href=""></a>party</span>
<span id="cb12-6"><a href=""></a></span>
<span id="cb12-7"><a href=""></a><span class="fu">plot</span>(party)</span>
<span id="cb12-8"><a href=""></a></span>
<span id="cb12-9"><a href=""></a><span class="fu">str</span>(<span class="fu">fitted</span>(party)</span>
<span id="cb12-10"><a href=""></a></span>
<span id="cb12-11"><a href=""></a> <span class="fu">prop.table</span>(<span class="fu">do.call</span>(<span class="st">"table"</span>, <span class="fu">fitted</span>(party)), <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="survol-très-superficiel-des-forêts-aléatoires" class="slide level2">
<h2>Survol très superficiel des forêts aléatoires</h2>
<p style="margin-top:0px; font-size: 60%;">
</p><p>Les forêts aléatoires (ou random forest) sont une extension des arbres de décisions visant à être encore plus efficace sur de la prédiction.</p>
<p>Le principe sous-jacent est plutôt simple, une multitude de modèles faibles et simples une fois combinés formeront un modèle robuste!</p>
<blockquote>
<p>L’algorithme va construire une “forêt” d’arbre de décision, c’est à dire plusieurs centaines voire milliers, construite de manière aléatoire.</p>
</blockquote>
<p><strong>Finalement absolument tout est dans le nom!</strong></p>
</section>
<section id="survol-très-superficiel-des-forêts-aléatoires-ii" class="slide level2">
<h2>Survol très superficiel des forêts aléatoires II</h2>
<p style="margin-top:0px; font-size: 60%;">
</p><p>Pour chaque arbre conçu dans notre modèle un échantillon aléatoire d’individus est selectionné.</p>
<p>Pour chaque noeud des arbre (et donc construction d’un sous-groupe) on utilise qu’ un sous-ensemble des variables possible.</p>
<p><strong>Une des particularités dans la forêt aléatoire c’est qu’il n’y a pas “d’élagage” des arbres de décisions, c’est à dire que l’arbre pousse jusqu’au sur-ajustement, la construction de l’arbre se poursuit tant que les feuilles terminales ne sont pas trop petites.</strong></p>
<p></p>
</section>
<section id="survol-très-superficiel-des-forêts-aléatoires-iii" class="slide level2">
<h2>Survol très superficiel des forêts aléatoires III</h2>
<p style="margin-top:0px; font-size: 60%;">
</p><p>Une fois le modèle élaboré, tous les arbres de décision vont tourner sur les données qui n’auront pas servies à leur construction.</p>
<p>La prédiction finale correspondra à la modalité prédite le plus fréquemment (dans le cas d’une variable à prédire qualitative) , ou au score moyen de tous les arbres de décisions (dans le cas d’une variable quantitative).</p>
<p>L’importance des variables explicatives sera fournie par une moyenne, réalisée sur l’ensemble des arbres de décision, de la diminution de l’erreur sur chaque ramification des arbres régit par la variable explicative.</p>
<p></p>
</section>
<section id="code-forêt-aléatoire" class="slide level2">
<h2>Code forêt aléatoire</h2>
<div class="panel-tabset" data-group="intro">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1">Consignes</a></li><li><a href="#tabset-9-2">Solutions</a></li></ul>
<div class="tab-content" data-group="intro">
<div id="tabset-9-1">
<p style="margin-top:0px; font-size: 60%;">
</p><p>Réaliser notre première forêt aléatoire !</p>
<p>Le package de base est <code>randomForest</code>, avec sa fonction <code>randomForest()</code>.</p>
<blockquote>
<p><img src="figure/alert.png" width="30" style="margin-top:0px;margin-bottom:-7px;margin-right:8px;"> Attention cette fonction ne supporte pas les données manquantes, il faudra les imputer ! Sinon il existe des packages alternatifs (<code>randomForestSRC</code>,<code>partyKit</code>…)</p>
</blockquote>
<p>La forêt aléatoire, en revanche ne produit pas de jolis visuels comme les arbres de décision. Mais on va particulièrement s’intéressé à l’importance des variables !</p>
<ul>
<li class="fragment">Pour mesurer l’importance l’algo permute aléatoirement la valeur d’une variable, si cette variable est importante ce changement va entrainer une baisse importante de précision du modèle !</li>
</ul>
<p></p>
</div>
<div id="tabset-9-2">
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="fu">library</span>(randomForest)</span>
<span id="cb13-2"><a href=""></a></span>
<span id="cb13-3"><a href=""></a><span class="co"># Imputation des données manquantes</span></span>
<span id="cb13-4"><a href=""></a></span>
<span id="cb13-5"><a href=""></a>titanic_complet <span class="ot">=</span> <span class="fu">rfImpute</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked, <span class="at">data=</span> titanic_data)</span>
<span id="cb13-6"><a href=""></a></span>
<span id="cb13-7"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb13-8"><a href=""></a>foret <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked,</span>
<span id="cb13-9"><a href=""></a>                      <span class="at">data =</span> titanic_complet,</span>
<span id="cb13-10"><a href=""></a>                      <span class="at">ntree =</span> <span class="dv">500</span>,        <span class="co"># Nombre d'arbres</span></span>
<span id="cb13-11"><a href=""></a>                      <span class="at">mtry =</span> <span class="dv">3</span>,          <span class="co"># Nombre de variables testées à chaque division</span></span>
<span id="cb13-12"><a href=""></a>                      <span class="at">importance =</span> <span class="cn">TRUE</span>, <span class="co"># Calcul de l'importance des variables</span></span>
<span id="cb13-13"><a href=""></a>                      <span class="at">do.trace =</span> <span class="dv">50</span>)     <span class="co"># Affichage du progrès tous les 50 arbres</span></span>
<span id="cb13-14"><a href=""></a></span>
<span id="cb13-15"><a href=""></a><span class="co"># Résumé de la forêt</span></span>
<span id="cb13-16"><a href=""></a><span class="fu">print</span>(foret)</span>
<span id="cb13-17"><a href=""></a></span>
<span id="cb13-18"><a href=""></a><span class="co"># Prédictions forêt aléatoire</span></span>
<span id="cb13-19"><a href=""></a>pred_foret <span class="ot">&lt;-</span> <span class="fu">predict</span>(foret, test_data, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb13-20"><a href=""></a>conf_matrix_foret <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(pred_foret, test_data<span class="sc">$</span>Survived)</span>
<span id="cb13-21"><a href=""></a><span class="fu">print</span>(conf_matrix_foret)</span>
<span id="cb13-22"><a href=""></a></span>
<span id="cb13-23"><a href=""></a><span class="co"># 1. Évolution de l'erreur avec le nombre d'arbres</span></span>
<span id="cb13-24"><a href=""></a><span class="fu">plot</span>(foret, <span class="at">main =</span> <span class="st">"Évolution de l'erreur selon le nombre d'arbres"</span>)</span>
<span id="cb13-25"><a href=""></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"OOB"</span>, <span class="st">"Décédé"</span>, <span class="st">"Survivant"</span>), </span>
<span id="cb13-26"><a href=""></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>), <span class="at">lty =</span> <span class="dv">1</span>)</span>
<span id="cb13-27"><a href=""></a>       </span>
<span id="cb13-28"><a href=""></a><span class="co"># Accéder aux valeurs ajustées :</span></span>
<span id="cb13-29"><a href=""></a></span>
<span id="cb13-30"><a href=""></a><span class="fu">print</span>(foret<span class="sc">$</span>predicted)</span>
<span id="cb13-31"><a href=""></a></span>
<span id="cb13-32"><a href=""></a><span class="co"># 2. Importance des variables</span></span>
<span id="cb13-33"><a href=""></a><span class="do">## les variables les plus importantes sont celles qui provoquent la plus forte baisse de `MeanDecreaseAccuracy` !</span></span>
<span id="cb13-34"><a href=""></a><span class="fu">print</span>(foret<span class="sc">$</span>importance)</span>
<span id="cb13-35"><a href=""></a></span>
<span id="cb13-36"><a href=""></a><span class="co"># Graphiques d'importance des variables</span></span>
<span id="cb13-37"><a href=""></a><span class="fu">varImpPlot</span>(foret, <span class="at">type =</span> <span class="dv">1</span>, <span class="at">main =</span> <span class="st">"Importance - Précision moyenne"</span>)</span>
<span id="cb13-38"><a href=""></a><span class="fu">varImpPlot</span>(foret, <span class="at">type =</span> <span class="dv">2</span>, <span class="at">main =</span> <span class="st">"Importance - Indice de Gini"</span>)</span>
<span id="cb13-39"><a href=""></a></span>
<span id="cb13-40"><a href=""></a><span class="co"># 3. Erreur Out-of-Bag (OOB) (estimation de l'erreur de prédiction)</span></span>
<span id="cb13-41"><a href=""></a><span class="co"># c'est un indicateur de performance de notre forêt aléatoire, une sorte de validation croisé mais calculé sur l'apprentissage sasn un jeux de données extérieur. </span></span>
<span id="cb13-42"><a href=""></a>oob_error <span class="ot">&lt;-</span> foret<span class="sc">$</span>err.rate[<span class="fu">nrow</span>(foret<span class="sc">$</span>err.rate), <span class="st">"OOB"</span>]</span>
<span id="cb13-43"><a href=""></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Erreur OOB finale:"</span>, <span class="fu">round</span>(oob_error, <span class="dv">4</span>)))</span>
<span id="cb13-44"><a href=""></a></span>
<span id="cb13-45"><a href=""></a><span class="co"># OPTIMISATION DE LA FORÊT ALÉATOIRE</span></span>
<span id="cb13-46"><a href=""></a><span class="co"># ============================================================================</span></span>
<span id="cb13-47"><a href=""></a></span>
<span id="cb13-48"><a href=""></a><span class="co"># Recherche du mtry optimal</span></span>
<span id="cb13-49"><a href=""></a></span>
<span id="cb13-50"><a href=""></a>mtry_optimal <span class="ot">&lt;-</span> <span class="fu">tuneRF</span>(titanic_complet[, <span class="fu">c</span>(<span class="st">"Pclass"</span>, <span class="st">"Sex"</span>, <span class="st">"Age"</span>, <span class="st">"SibSp"</span>, <span class="st">"Parch"</span>, <span class="st">"Fare"</span>, <span class="st">"Embarked"</span>)],</span>
<span id="cb13-51"><a href=""></a>                       titanic_complet<span class="sc">$</span>Survived,</span>
<span id="cb13-52"><a href=""></a>                       <span class="at">stepFactor =</span> <span class="fl">1.5</span>,</span>
<span id="cb13-53"><a href=""></a>                       <span class="at">improve =</span> <span class="fl">0.01</span>,</span>
<span id="cb13-54"><a href=""></a>                       <span class="at">ntree =</span> <span class="dv">300</span>,</span>
<span id="cb13-55"><a href=""></a>                       <span class="at">doBest =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-56"><a href=""></a>                       <span class="at">plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb13-57"><a href=""></a>                       <span class="at">main =</span> <span class="st">"Optimisation du paramètre mtry"</span>)</span>
<span id="cb13-58"><a href=""></a></span>
<span id="cb13-59"><a href=""></a><span class="co"># Forêt optimisée</span></span>
<span id="cb13-60"><a href=""></a>foret_optimisee <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(Survived <span class="sc">~</span> Pclass <span class="sc">+</span> Sex <span class="sc">+</span> Age <span class="sc">+</span> SibSp <span class="sc">+</span> Parch <span class="sc">+</span> Fare <span class="sc">+</span> Embarked,</span>
<span id="cb13-61"><a href=""></a>                               <span class="at">data =</span> titanic_complet,</span>
<span id="cb13-62"><a href=""></a>                               <span class="at">ntree =</span> <span class="dv">500</span>,</span>
<span id="cb13-63"><a href=""></a>                               <span class="at">mtry =</span> mtry_optimal[<span class="fu">which.min</span>(mtry_optimal[,<span class="dv">2</span>]), <span class="dv">1</span>],</span>
<span id="cb13-64"><a href=""></a>                               <span class="at">importance =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-65"><a href=""></a></span>
<span id="cb13-66"><a href=""></a><span class="fu">print</span>(<span class="st">"Forêt optimisée"</span>)</span>
<span id="cb13-67"><a href=""></a><span class="fu">print</span>(foret_optimisee)</span>
<span id="cb13-68"><a href=""></a></span>
<span id="cb13-69"><a href=""></a><span class="co"># Prédictions avec la forêt optimisée</span></span>
<span id="cb13-70"><a href=""></a>pred_foret_opt <span class="ot">&lt;-</span> <span class="fu">predict</span>(foret_optimisee, test_data, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb13-71"><a href=""></a>conf_matrix_foret_opt <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(pred_foret_opt, test_data<span class="sc">$</span>Survived)</span>
<span id="cb13-72"><a href=""></a></span>
<span id="cb13-73"><a href=""></a></span>
<span id="cb13-74"><a href=""></a><span class="do">#### Prédiction sur un nouveau jeux de donnée</span></span>
<span id="cb13-75"><a href=""></a></span>
<span id="cb13-76"><a href=""></a><span class="co">#Attention l'algorithme est très sensible, il faut que les nouvelles données aient exactement les même prédicteurs et que toutes les modalités des facteurs ayant entrainé le modèle soit aussi présentes dans le nouveau jeu de donnée.</span></span>
<span id="cb13-77"><a href=""></a><span class="do">## Ainsi ce nouveau jeux de données utilisé ici à une dernière ligne factice mais avec la modalité "vide" pour la variable embarqueement, sans cette ligne impossible de réaliser la prédiction</span></span>
<span id="cb13-78"><a href=""></a><span class="co"># En tout cas dasn le cadre de ce package</span></span>
<span id="cb13-79"><a href=""></a></span>
<span id="cb13-80"><a href=""></a><span class="co"># On situe le dossier dans lequel se trouve nos données</span></span>
<span id="cb13-81"><a href=""></a>csv_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"titanic_predict2.csv"</span>)</span>
<span id="cb13-82"><a href=""></a><span class="co"># Lecture du CSV dans un dataframe</span></span>
<span id="cb13-83"><a href=""></a>titanic_predict2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(csv_path)</span>
<span id="cb13-84"><a href=""></a></span>
<span id="cb13-85"><a href=""></a>titanic_predict2 <span class="ot">&lt;-</span> titanic_predict2 <span class="sc">%&gt;%</span></span>
<span id="cb13-86"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-87"><a href=""></a>    <span class="at">Pclass =</span> <span class="fu">factor</span>(Pclass),</span>
<span id="cb13-88"><a href=""></a>    <span class="at">Sex =</span> <span class="fu">factor</span>(Sex),</span>
<span id="cb13-89"><a href=""></a>    <span class="at">Embarked =</span> <span class="fu">factor</span>(Embarked)</span>
<span id="cb13-90"><a href=""></a>  )</span>
<span id="cb13-91"><a href=""></a></span>
<span id="cb13-92"><a href=""></a>titanic <span class="ot">=</span> titanic_predict2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Pclass, Sex,Age,SibSp,Parch,Fare, Embarked)</span>
<span id="cb13-93"><a href=""></a></span>
<span id="cb13-94"><a href=""></a></span>
<span id="cb13-95"><a href=""></a><span class="co"># 1. PRÉDICTION DES CLASSES (0 = Décédé, 1 = Survivant)</span></span>
<span id="cb13-96"><a href=""></a>predictions_classes <span class="ot">&lt;-</span> <span class="fu">predict</span>(foret, titanic, <span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb13-97"><a href=""></a></span>
<span id="cb13-98"><a href=""></a><span class="co"># 2. PRÉDICTION DES PROBABILITÉS</span></span>
<span id="cb13-99"><a href=""></a>predictions_probabilities <span class="ot">&lt;-</span> <span class="fu">predict</span>(foret, titanic, <span class="at">type =</span> <span class="st">"prob"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'convex',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>